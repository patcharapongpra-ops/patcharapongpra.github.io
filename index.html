<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Provisioning Portal</title>
  <style>
    :root{
      --bg:#0b0f14;
      --panel:#101826;
      --panel2:#0f1722;
      --line:#243449;
      --text:#eaf2ff;
      --muted:#8fa4be;
      --accent:#ff7a18;   /* ORANGE */
      --accent2:#ff9a3c;
      --ok:#37d67a;
      --warn:#ffd089;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background: radial-gradient(1200px 600px at 10% 0%, rgba(255,122,24,.16), transparent 55%),
                  radial-gradient(900px 500px at 90% 20%, rgba(255,154,60,.10), transparent 55%),
                  linear-gradient(180deg, #0b0f14, #070a0d);
      color:var(--text);
      min-height:100vh;
    }

    .topbar{
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(10px);
      background: rgba(11,15,20,.65);
      border-bottom:1px solid rgba(36,52,73,.65);
    }
    .topbar-inner{
      max-width:1200px; margin:0 auto;
      display:flex; align-items:center; gap:12px;
      padding:12px 16px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      font-weight:900; letter-spacing:.2px;
    }
    .logo{
      width:34px; height:34px; border-radius:12px;
      background: linear-gradient(180deg, var(--accent), #d85f0f);
      box-shadow: 0 10px 30px rgba(255,122,24,.18);
      display:grid; place-items:center;
      font-weight:1000;
      color:#1a0d05;
    }
    .brand small{display:block; font-weight:700; color:var(--muted); margin-top:2px; letter-spacing:0}
    .spacer{flex:1}
    .userbox{
      display:flex; align-items:center; gap:10px;
      color:var(--muted); font-size:13px;
    }
    .pill{
      border:1px solid rgba(36,52,73,.9);
      background: rgba(16,24,38,.75);
      padding:6px 10px;
      border-radius:999px;
      color:var(--muted);
      font-size:12px;
    }
    .btn{
      border:1px solid rgba(36,52,73,.9);
      background: rgba(16,24,38,.75);
      color:var(--text);
      padding:9px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:900;
    }
    .btn.primary{
      background: linear-gradient(180deg, rgba(255,122,24,.95), rgba(216,95,15,.95));
      border-color: rgba(255,122,24,.55);
      color:#1a0d05;
    }
    .btn.ghost{background: rgba(16,24,38,.35);}
    .btn:disabled{opacity:.55;cursor:not-allowed}

    .container{max-width:1200px; margin:0 auto; padding:16px;}
    .layout{
      display:grid;
      grid-template-columns: 260px 1fr;
      gap:14px;
      align-items:start;
    }

    .sidebar{
      border:1px solid rgba(36,52,73,.75);
      background: rgba(16,24,38,.65);
      border-radius:18px;
      padding:14px;
      position:sticky; top:76px;
    }
    .nav-title{
      font-size:12px; color:var(--muted);
      letter-spacing:.12em;
      text-transform:uppercase;
      margin:2px 0 10px;
    }
    .nav{
      display:flex; flex-direction:column; gap:8px;
    }
    .nav a{
      text-decoration:none;
      color:var(--text);
      border:1px solid rgba(36,52,73,.75);
      background: rgba(15,23,34,.6);
      padding:10px 12px;
      border-radius:14px;
      display:flex; align-items:center; justify-content:space-between;
      transition: transform .05s ease, border-color .2s ease;
    }
    .nav a:hover{border-color: rgba(255,122,24,.55); transform: translateY(-1px);}
    .nav a .tag{
      font-size:11px; color:var(--muted);
      border:1px solid rgba(36,52,73,.75);
      padding:2px 8px; border-radius:999px;
      background: rgba(16,24,38,.55);
    }

    .main{
      border:1px solid rgba(36,52,73,.75);
      background: rgba(16,24,38,.55);
      border-radius:18px;
      padding:18px;
      min-height:520px;
    }
    .hero{
      border:1px solid rgba(255,122,24,.25);
      background: radial-gradient(800px 260px at 20% 0%, rgba(255,122,24,.14), transparent 55%),
                  rgba(15,23,34,.55);
      border-radius:18px;
      padding:16px;
    }
    .hero h2{margin:0; font-size:18px;}
    .hero p{margin:6px 0 0; color:var(--muted); font-size:13px; line-height:1.5}
    .grid{
      margin-top:14px;
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:12px;
    }
    .card{
      border:1px solid rgba(36,52,73,.75);
      background: rgba(15,23,34,.55);
      border-radius:16px;
      padding:14px;
    }
    .card h3{margin:0; font-size:14px;}
    .card p{margin:6px 0 0; font-size:12px; color:var(--muted); line-height:1.5}
    .hidden{display:none !important;}

    .overlay{
      position:fixed; inset:0;
      display:grid; place-items:center;
      padding:16px;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(6px);
      z-index:50;
    }
    .login{
      width:min(520px, 100%);
      border:1px solid rgba(36,52,73,.85);
      background: rgba(16,24,38,.92);
      border-radius:18px;
      padding:18px;
      box-shadow: 0 30px 80px rgba(0,0,0,.45);
    }
    .login h2{margin:0; font-size:18px;}
    .login .sub{margin-top:6px; font-size:13px; color:var(--muted); line-height:1.5}
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; align-items:center}
    select,input{
      background: rgba(14,21,32,.95);
      border:1px solid rgba(36,52,73,.9);
      color:var(--text);
      padding:10px 10px;
      border-radius:12px;
      outline:none;
      min-width:200px;
    }
    input::placeholder{color:#6f859d}
    pre{
      margin-top:10px;
      white-space:pre-wrap;word-break:break-word;
      background: rgba(14,21,32,.95);
      border:1px solid rgba(36,52,73,.9);
      padding:10px;border-radius:12px;
      color:#cfe3ff;font-size:12px;
    }

    @media (max-width: 980px){
      .layout{grid-template-columns: 1fr;}
      .sidebar{position:relative; top:auto;}
      .grid{grid-template-columns: 1fr;}
    }
  </style>
</head>
<body>

  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo">P</div>
        <div>
          Provisioning Portal
          <small>Daily work tracking • Sync to Drive</small>
        </div>
      </div>

      <div class="spacer"></div>

      <div class="userbox">
        <span class="pill" id="who">Not logged in</span>
        <button class="btn ghost hidden" id="btnLogout">Logout</button>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="layout">

      <aside class="sidebar">
        <div class="nav-title">Navigation</div>
        <nav class="nav" id="nav">
          <a href="provi-daily-checklist.html">
            <span>Provi Daily Checklist</span>
            <span class="tag">Work</span>
          </a>
          <a href="temp_configuration.html">
            <span>Temp Configuration</span>
            <span class="tag">Tools</span>
          </a>
          <a href="#" id="openDrive">
            <span>Open Drive Folder</span>
            <span class="tag">Files</span>
          </a>
        </nav>

        <div style="margin-top:12px;color:var(--muted);font-size:12px;line-height:1.5;">
          * เมนูเพิ่มได้ในอนาคต<br/>
          * Login แล้วถึงใช้งานได้
        </div>
      </aside>

      <main class="main">
        <div class="hero">
          <h2>Announcement / Dashboard</h2>
          <p>
            พื้นที่ตรงกลางไว้ประกาศงาน / แจ้งเตือน / หรือสรุปสถานะภาพรวมในอนาคต
          </p>
          <div style="margin-top:10px;">
            <span class="pill" id="userHint">Login เพื่อเริ่มใช้งาน</span>
          </div>
        </div>

        <div class="grid">
          <div class="card">
            <h3>Today focus</h3>
            <p>ไว้สรุปงานค้าง/งานด่วน/ใกล้วันติดตั้ง (ทำต่อในเฟสถัดไป)</p>
          </div>
          <div class="card">
            <h3>Policy</h3>
            <p>Sync ผ่าน Apps Script → Drive/Sheet รายเดือนแยก user</p>
          </div>
          <div class="card">
            <h3>Notes</h3>
            <p>พี่แก้ข้อความประกาศตรงกลางได้ตามต้องการ</p>
          </div>
        </div>
      </main>

    </div>
  </div>

  <div class="overlay" id="overlay">
    <div class="login">
      <h2>Login</h2>
      <div class="sub">เลือกผู้ใช้และใส่รหัสผ่าน เพื่อเข้าใช้งาน Provisioning Portal</div>

      <div class="row">
        <select id="userPick">
          <option value="">เลือกผู้ใช้…</option>
          <option value="Patcharapong">Patcharapong</option>
          <option value="Nawaphon">Nawaphon</option>
        </select>
        <input id="pass" type="password" placeholder="Password" />
        <button class="btn primary" id="btnLogin">Sign in</button>
      </div>

      <div class="sub" style="margin-top:10px;">
        * Login แล้ว กล่องนี้จะหายไป เหลือ Logout มุมขวาบน
      </div>

      <pre id="loginDebug">-</pre>
    </div>
  </div>

  <script>
    const ROOT_DRIVE_FOLDER_ID = "1sxBCtzxb7J_Hkw_9o_klPkQHHXLyMtIk";
    const SESSION_KEY = "provi_session"; // {user,pass,ymLastSync}

    const $ = (id) => document.getElementById(id);
    const logLogin = (obj) => {
      $("loginDebug").textContent = (typeof obj === "string") ? obj : JSON.stringify(obj, null, 2);
    };

    function getSession(){
      try { return JSON.parse(localStorage.getItem(SESSION_KEY) || "{}"); }
      catch { return {}; }
    }
    function setSession(s){ localStorage.setItem(SESSION_KEY, JSON.stringify(s)); }
    function clearSession(){ localStorage.removeItem(SESSION_KEY); }

    function refreshUI(){
      const s = getSession();
      const loggedIn = !!(s.user && s.pass);

      $("who").textContent = loggedIn ? `Logged in: ${s.user}` : "Not logged in";
      $("btnLogout").classList.toggle("hidden", !loggedIn);
      $("overlay").classList.toggle("hidden", loggedIn);
      $("userHint").textContent = loggedIn ? `Welcome, ${s.user}` : "Login เพื่อเริ่มใช้งาน";
      $("nav").style.opacity = loggedIn ? "1" : ".55";
    }

    function requireLoginOrWarn(){
      const s = getSession();
      if (s.user && s.pass) return true;
      alert("กรุณา Login ก่อน");
      return false;
    }

    function openDriveFolder(){
      window.open(`https://drive.google.com/drive/folders/${ROOT_DRIVE_FOLDER_ID}`, "_blank");
    }

    function init(){
      $("btnLogout").onclick = () => { clearSession(); refreshUI(); };
      $("btnLogin").onclick = () => {
        const user = $("userPick").value;
        const pass = $("pass").value;
        if(!user || !pass){ logLogin("เลือก user + ใส่รหัสให้ครบ"); return; }
        setSession({ user, pass, ymLastSync: "" });
        $("pass").value = "";
        logLogin({ ok:true, user });
        refreshUI();
      };
      $("openDrive").onclick = (e)=>{ e.preventDefault(); if(requireLoginOrWarn()) openDriveFolder(); };

      refreshUI();
      logLogin("Ready. Please login.");
    }
    init();
  </script>
</body>
</html>
